{
  "hash": "b1f40b9607f40909fa4dfed6e0fb3721",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"API\"\nauthor: \"Tony Duan\"\n\nexecute:\n  warning: false\n  error: false\n\nformat:\n  html:\n    toc: true\n    toc-location: right\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    code-copy: true\n---\n\n# calling API\n\n\nto get exchange rate from European Central Bank.https://frankfurter.dev/\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(httr)\nlibrary(jsonlite)\nlibrary(plotly)\nlibrary(lubridate)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nget_usd_thb_rates <- function(start_date, end_date,base_currency,target_currency) {\n  url <- paste0(\n    \"https://api.frankfurter.app/\",\n    start_date, \"..\", end_date,\n    \"?from=\", base_currency,\n    \"&to=\", target_currency\n  )\n  \n  response <- GET(url)\n  \n  if (status_code(response) == 200) {\n    data <- fromJSON(content(response, \"text\"))\n    rates_df <- data.frame(\n      date = names(data$rates),\n      rate = sapply(data$rates, function(x) x[[target_currency]])\n    )\n    row.names(rates_df) <- NULL\n    rates_df$date <- as.Date(rates_df$date)\n    return(rates_df)\n  } else {\n    stop(paste(\"Error:\", status_code(response)))\n  }\n}\n```\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nUSD_THB=get_usd_thb_rates(start_date='2024-01-01', end_date=Sys.Date(),base_currency='USD',target_currency='THB')\n```\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nUSD_CNY=get_usd_thb_rates(start_date='2024-01-01', end_date=Sys.Date(),base_currency='USD',target_currency='CNY')\n```\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nUSD_CNY_THB <- merge(USD_THB, USD_CNY, by = \"date\", suffixes = c(\"_THB\", \"_CNY\"))\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_ly(data=USD_CNY_THB, x=~date) %>%\n  add_lines(y=~rate_THB, name='USD to THB', line=list(color='blue')) %>%\n  add_lines(y=~rate_CNY, name='USD to CNY', line=list(color='red'), yaxis = \"y2\") %>%\n  layout(title=\"USD to THB and CNY Exchange Rates\",\n         xaxis=list(title=\"Date\"),\n         yaxis=list(title=\"Rate THB\", showgrid=FALSE),\n         yaxis2=list(title=\"Rate CNY\", overlaying = \"y\", side = \"right\", tickformat = \".2f\"),\n         legend=list(orientation = 'h', xanchor = \"center\", x = 0.5, y = -0.2),\n         margin = list(r = 80)) # Increase right margin\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-5606704813fcc5e1c87e\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-5606704813fcc5e1c87e\">{\"x\":{\"visdat\":{\"30083ff66c2c\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"30083ff66c2c\",\"attrs\":{\"30083ff66c2c\":{\"x\":{},\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"y\":{},\"type\":\"scatter\",\"mode\":\"lines\",\"name\":\"USD to THB\",\"line\":{\"color\":\"blue\"},\"inherit\":true},\"30083ff66c2c.1\":{\"x\":{},\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"y\":{},\"type\":\"scatter\",\"mode\":\"lines\",\"name\":\"USD to CNY\",\"line\":{\"color\":\"red\"},\"yaxis\":\"y2\",\"inherit\":true}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":80},\"title\":\"USD to THB and CNY Exchange Rates\",\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"Date\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"Rate THB\",\"showgrid\":false},\"yaxis2\":{\"title\":\"Rate CNY\",\"overlaying\":\"y\",\"side\":\"right\",\"tickformat\":\".2f\"},\"legend\":{\"orientation\":\"h\",\"xanchor\":\"center\",\"x\":0.5,\"y\":-0.20000000000000001},\"hovermode\":\"closest\",\"showlegend\":true},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"x\":[\"2023-12-25\",\"2024-01-01\",\"2024-01-08\",\"2024-01-15\",\"2024-01-22\",\"2024-01-29\",\"2024-02-05\",\"2024-02-12\",\"2024-02-19\",\"2024-02-26\",\"2024-03-04\",\"2024-03-11\",\"2024-03-18\",\"2024-03-25\",\"2024-04-01\",\"2024-04-08\",\"2024-04-15\",\"2024-04-22\",\"2024-04-29\",\"2024-05-06\",\"2024-05-13\",\"2024-05-20\",\"2024-05-27\",\"2024-06-03\",\"2024-06-10\",\"2024-06-17\",\"2024-06-24\",\"2024-07-01\",\"2024-07-08\",\"2024-07-15\",\"2024-07-22\",\"2024-07-29\",\"2024-08-05\",\"2024-08-12\",\"2024-08-19\",\"2024-08-26\",\"2024-09-02\",\"2024-09-09\",\"2024-09-16\",\"2024-09-23\",\"2024-09-30\",\"2024-10-07\",\"2024-10-14\",\"2024-10-21\",\"2024-10-28\",\"2024-11-04\",\"2024-11-11\",\"2024-11-18\",\"2024-11-25\",\"2024-12-02\",\"2024-12-09\",\"2024-12-16\",\"2024-12-23\",\"2024-12-30\",\"2025-01-06\",\"2025-01-13\",\"2025-01-20\",\"2025-01-27\",\"2025-02-03\",\"2025-02-10\",\"2025-02-17\",\"2025-02-24\",\"2025-03-03\",\"2025-03-10\",\"2025-03-17\",\"2025-03-24\",\"2025-03-31\",\"2025-04-07\",\"2025-04-14\",\"2025-04-21\",\"2025-04-28\",\"2025-05-05\",\"2025-05-12\",\"2025-05-19\",\"2025-05-26\",\"2025-06-02\"],\"y\":[34.365000000000002,34.497999999999998,35.023000000000003,35.387,35.649999999999999,35.435000000000002,35.780999999999999,35.984000000000002,35.968000000000004,35.923000000000002,35.683,35.671999999999997,36.130000000000003,36.377000000000002,36.694000000000003,36.511000000000003,36.759999999999998,37.024999999999999,36.951999999999998,36.845999999999997,36.484000000000002,36.396999999999998,36.709000000000003,36.622999999999998,36.722999999999999,36.731999999999999,36.747,36.701999999999998,36.320999999999998,36.085999999999999,36.173000000000002,35.716999999999999,35.392000000000003,35.027000000000001,34.314999999999998,33.982999999999997,33.966000000000001,33.694000000000003,33.200000000000003,32.670000000000002,32.764000000000003,33.439,33.216000000000001,33.619,33.795000000000002,33.963000000000001,34.755000000000003,34.637,34.475999999999999,34.271000000000001,33.877000000000002,34.308,34.146000000000001,34.290999999999997,34.536000000000001,34.671999999999997,33.972000000000001,33.710999999999999,33.771000000000001,33.933,33.671999999999997,33.802999999999997,33.764000000000003,33.789999999999999,33.692999999999998,33.904000000000003,34.149999999999999,34.261000000000003,33.406999999999996,33.395000000000003,33.371000000000002,32.813000000000002,33.343000000000004,32.850999999999999,32.716000000000001,32.594999999999999],\"type\":\"scatter\",\"mode\":\"lines\",\"name\":\"USD to THB\",\"line\":{\"color\":\"blue\"},\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(31,119,180,1)\"}},\"error_y\":{\"color\":\"rgba(31,119,180,1)\"},\"error_x\":{\"color\":\"rgba(31,119,180,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[\"2023-12-25\",\"2024-01-01\",\"2024-01-08\",\"2024-01-15\",\"2024-01-22\",\"2024-01-29\",\"2024-02-05\",\"2024-02-12\",\"2024-02-19\",\"2024-02-26\",\"2024-03-04\",\"2024-03-11\",\"2024-03-18\",\"2024-03-25\",\"2024-04-01\",\"2024-04-08\",\"2024-04-15\",\"2024-04-22\",\"2024-04-29\",\"2024-05-06\",\"2024-05-13\",\"2024-05-20\",\"2024-05-27\",\"2024-06-03\",\"2024-06-10\",\"2024-06-17\",\"2024-06-24\",\"2024-07-01\",\"2024-07-08\",\"2024-07-15\",\"2024-07-22\",\"2024-07-29\",\"2024-08-05\",\"2024-08-12\",\"2024-08-19\",\"2024-08-26\",\"2024-09-02\",\"2024-09-09\",\"2024-09-16\",\"2024-09-23\",\"2024-09-30\",\"2024-10-07\",\"2024-10-14\",\"2024-10-21\",\"2024-10-28\",\"2024-11-04\",\"2024-11-11\",\"2024-11-18\",\"2024-11-25\",\"2024-12-02\",\"2024-12-09\",\"2024-12-16\",\"2024-12-23\",\"2024-12-30\",\"2025-01-06\",\"2025-01-13\",\"2025-01-20\",\"2025-01-27\",\"2025-02-03\",\"2025-02-10\",\"2025-02-17\",\"2025-02-24\",\"2025-03-03\",\"2025-03-10\",\"2025-03-17\",\"2025-03-24\",\"2025-03-31\",\"2025-04-07\",\"2025-04-14\",\"2025-04-21\",\"2025-04-28\",\"2025-05-05\",\"2025-05-12\",\"2025-05-19\",\"2025-05-26\",\"2025-06-02\"],\"y\":[7.1048999999999998,7.1496000000000004,7.165,7.1890000000000001,7.1722000000000001,7.1790000000000003,7.1943000000000001,7.1936999999999998,7.1947000000000001,7.1973000000000003,7.1969000000000003,7.1875999999999998,7.2047999999999996,7.2217000000000002,7.2350000000000003,7.2347999999999999,7.2386999999999997,7.2460000000000004,7.2411000000000003,7.2209000000000003,7.2266000000000004,7.2384000000000004,7.2428999999999997,7.2436999999999996,7.2527999999999997,7.2577999999999996,7.2637999999999998,7.2701000000000002,7.2670000000000003,7.2628000000000004,7.2591999999999999,7.2369000000000003,7.1585999999999999,7.1600000000000001,7.1394000000000002,7.1123000000000003,7.1069000000000004,7.1127000000000002,7.0795000000000003,7.0277000000000003,7.0174000000000003,7.0564,7.1075999999999997,7.1207000000000003,7.1228999999999996,7.1398000000000001,7.2222,7.2431999999999999,7.2462,7.2720000000000002,7.2652999999999999,7.2899000000000003,7.298,7.3042999999999996,7.3274999999999997,7.3308,7.2800000000000002,7.2491000000000003,7.2702999999999998,7.2972999999999999,7.2690000000000001,7.2626999999999997,7.2584,7.2445000000000004,7.2365000000000004,7.2615999999999996,7.2735000000000003,7.3235000000000001,7.3078000000000003,7.2949000000000002,7.2769000000000004,7.2385999999999999,7.2054,7.2047999999999996,7.1913999999999998,7.1872999999999996],\"type\":\"scatter\",\"mode\":\"lines\",\"name\":\"USD to CNY\",\"line\":{\"color\":\"red\"},\"yaxis\":\"y2\",\"marker\":{\"color\":\"rgba(255,127,14,1)\",\"line\":{\"color\":\"rgba(255,127,14,1)\"}},\"error_y\":{\"color\":\"rgba(255,127,14,1)\"},\"error_x\":{\"color\":\"rgba(255,127,14,1)\"},\"xaxis\":\"x\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCNY_THB=get_usd_thb_rates(start_date='2024-01-01', end_date=Sys.Date(),base_currency='CNY',target_currency='THB')\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_ly(data=CNY_THB, x=~date) |> \n  add_lines(y=~rate, name='CNY to THB', line=list(color='green')) |> \n  layout(title=\"CNY to THB Exchange Rate\",\n         xaxis=list(title=\"Date\"),\n         yaxis=list(title=\"Rate\", showgrid=FALSE),\n         legend=list(orientation = 'h', xanchor = \"center\", x = 0.5, y = -0.2),\n         margin = list(r = 80)) # Increase right margin\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-25ac7561fe334c7addff\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-25ac7561fe334c7addff\">{\"x\":{\"visdat\":{\"300828f623d8\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"300828f623d8\",\"attrs\":{\"300828f623d8\":{\"x\":{},\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"y\":{},\"type\":\"scatter\",\"mode\":\"lines\",\"name\":\"CNY to THB\",\"line\":{\"color\":\"green\"},\"inherit\":true}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":80},\"title\":\"CNY to THB Exchange Rate\",\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"Date\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"Rate\",\"showgrid\":false},\"legend\":{\"orientation\":\"h\",\"xanchor\":\"center\",\"x\":0.5,\"y\":-0.20000000000000001},\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"x\":[\"2023-12-25\",\"2024-01-01\",\"2024-01-08\",\"2024-01-15\",\"2024-01-22\",\"2024-01-29\",\"2024-02-05\",\"2024-02-12\",\"2024-02-19\",\"2024-02-26\",\"2024-03-04\",\"2024-03-11\",\"2024-03-18\",\"2024-03-25\",\"2024-04-01\",\"2024-04-08\",\"2024-04-15\",\"2024-04-22\",\"2024-04-29\",\"2024-05-06\",\"2024-05-13\",\"2024-05-20\",\"2024-05-27\",\"2024-06-03\",\"2024-06-10\",\"2024-06-17\",\"2024-06-24\",\"2024-07-01\",\"2024-07-08\",\"2024-07-15\",\"2024-07-22\",\"2024-07-29\",\"2024-08-05\",\"2024-08-12\",\"2024-08-19\",\"2024-08-26\",\"2024-09-02\",\"2024-09-09\",\"2024-09-16\",\"2024-09-23\",\"2024-09-30\",\"2024-10-07\",\"2024-10-14\",\"2024-10-21\",\"2024-10-28\",\"2024-11-04\",\"2024-11-11\",\"2024-11-18\",\"2024-11-25\",\"2024-12-02\",\"2024-12-09\",\"2024-12-16\",\"2024-12-23\",\"2024-12-30\",\"2025-01-06\",\"2025-01-13\",\"2025-01-20\",\"2025-01-27\",\"2025-02-03\",\"2025-02-10\",\"2025-02-17\",\"2025-02-24\",\"2025-03-03\",\"2025-03-10\",\"2025-03-17\",\"2025-03-24\",\"2025-03-31\",\"2025-04-07\",\"2025-04-14\",\"2025-04-21\",\"2025-04-28\",\"2025-05-05\",\"2025-05-12\",\"2025-05-19\",\"2025-05-26\",\"2025-06-02\"],\"y\":[4.8368000000000002,4.8251999999999997,4.8879999999999999,4.9223999999999997,4.9706000000000001,4.9359000000000002,4.9734999999999996,5.0022000000000002,4.9992000000000001,4.9911000000000003,4.9580000000000002,4.9630000000000001,5.0148000000000001,5.0372000000000003,5.0716999999999999,5.0465999999999998,5.0781999999999998,5.1097000000000001,5.1031000000000004,5.1026999999999996,5.0486000000000004,5.0282999999999998,5.0682,5.0559000000000003,5.0632999999999999,5.0610999999999997,5.0589000000000004,5.0484,4.9981999999999998,4.9686000000000003,4.9829999999999997,4.9353999999999996,4.9440999999999997,4.8921000000000001,4.8064,4.7779999999999996,4.7793000000000001,4.7370999999999999,4.6894999999999998,4.6487999999999996,4.6689999999999996,4.7388000000000003,4.6733000000000002,4.7213000000000003,4.7445000000000004,4.7568000000000001,4.8122999999999996,4.782,4.7576999999999998,4.7127999999999997,4.6627999999999998,4.7061999999999999,4.6787999999999998,4.6947000000000001,4.7133000000000003,4.7297000000000002,4.6665000000000001,4.6502999999999997,4.6451000000000002,4.6501000000000001,4.6322999999999999,4.6543000000000001,4.6517999999999997,4.6642999999999999,4.6561000000000003,4.6689999999999996,4.6951000000000001,4.6782000000000004,4.5713999999999997,4.5777999999999999,4.5858999999999996,4.5331000000000001,4.6273999999999997,4.5595999999999997,4.5492999999999997,4.5350999999999999],\"type\":\"scatter\",\"mode\":\"lines\",\"name\":\"CNY to THB\",\"line\":{\"color\":\"green\"},\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(31,119,180,1)\"}},\"error_y\":{\"color\":\"rgba(31,119,180,1)\"},\"error_x\":{\"color\":\"rgba(31,119,180,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(max(CNY_THB$rate)-min(CNY_THB$rate))/min(CNY_THB$rate)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.1271977\n```\n\n\n:::\n:::\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}